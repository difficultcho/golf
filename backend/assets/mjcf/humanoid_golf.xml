<mujoco model="humanoid_golf">
  <!--
    Custom MuJoCo Model for Golf Swing Simulation

    Features:
    - 26 DOF humanoid body
    - Golf club attachment
    - Ground contact modeling
    - Mocap tracking support

    Reference: docs/MUJOCO_MODEL.md
  -->

  <compiler angle="degree" inertiafromgeom="true"/>

  <option timestep="0.005" iterations="50" solver="Newton" gravity="0 0 -9.81"/>

  <default>
    <joint damping="0.5" armature="0.01"/>
    <geom condim="3" friction="1.0 0.005 0.0001" rgba="0.8 0.6 0.4 1"/>
    <motor ctrllimited="true" ctrlrange="-1 1"/>
  </default>

  <asset>
    <texture name="grid" type="2d" builtin="checker" width="512" height="512" rgb1="0.2 0.3 0.2" rgb2="0.1 0.2 0.1"/>
    <material name="grid" texture="grid" texrepeat="4 4" texuniform="true" reflectance="0.2"/>
    <material name="floor_mat" rgba="0.3 0.5 0.3 1" reflectance="0.1"/>
  </asset>

  <worldbody>
    <!-- Ground plane -->
    <geom name="floor" type="plane" size="10 10 0.1" material="floor_mat"/>

    <light pos="0 0 3" dir="0 0 -1" diffuse="0.8 0.8 0.8" specular="0.2 0.2 0.2"/>

    <!-- Humanoid body -->
    <body name="pelvis" pos="0 0 1.0">
      <freejoint/>
      <geom name="pelvis_geom" type="capsule" fromto="0 -0.1 0 0 0.1 0" size="0.08"/>
      <inertial pos="0 0 0" mass="10" diaginertia="0.1 0.1 0.05"/>

      <!-- Torso -->
      <body name="torso" pos="0 0 0.15">
        <joint name="lumbar_rotation" type="hinge" axis="0 0 1" range="-45 45"/>
        <joint name="lumbar_flexion" type="hinge" axis="0 1 0" range="-30 60"/>
        <geom name="torso_geom" type="capsule" fromto="0 0 0 0 0 0.4" size="0.1"/>
        <inertial pos="0 0 0.2" mass="15" diaginertia="0.2 0.2 0.1"/>

        <!-- Head -->
        <body name="head" pos="0 0 0.5">
          <joint name="neck_flex" type="hinge" axis="0 1 0" range="-30 30"/>
          <geom name="head_geom" type="sphere" size="0.12" rgba="0.9 0.7 0.6 1"/>
          <inertial pos="0 0 0" mass="5" diaginertia="0.05 0.05 0.05"/>
        </body>

        <!-- Left shoulder and arm -->
        <body name="left_shoulder" pos="0 0.2 0.35">
          <joint name="left_shoulder_flex" type="hinge" axis="0 1 0" range="-60 180"/>
          <joint name="left_shoulder_abd" type="hinge" axis="1 0 0" range="0 180"/>
          <joint name="left_shoulder_rot" type="hinge" axis="0 0 1" range="-90 90"/>
          <geom name="left_upper_arm" type="capsule" fromto="0 0 0 0 0 -0.3" size="0.04"/>
          <inertial pos="0 0 -0.15" mass="3" diaginertia="0.02 0.02 0.01"/>

          <body name="left_elbow" pos="0 0 -0.3">
            <joint name="left_elbow_flex" type="hinge" axis="0 1 0" range="0 145"/>
            <geom name="left_forearm" type="capsule" fromto="0 0 0 0 0 -0.3" size="0.03"/>
            <inertial pos="0 0 -0.15" mass="2" diaginertia="0.015 0.015 0.01"/>

            <body name="left_wrist" pos="0 0 -0.3">
              <joint name="left_wrist_flex" type="hinge" axis="0 1 0" range="-70 80"/>
              <joint name="left_wrist_dev" type="hinge" axis="1 0 0" range="-25 25"/>
              <geom name="left_hand" type="box" size="0.04 0.08 0.02" rgba="0.9 0.7 0.6 1"/>
              <inertial pos="0 0 0" mass="0.5" diaginertia="0.005 0.005 0.002"/>

              <!-- Golf club attachment -->
              <body name="golf_club" pos="0.05 0 -0.1">
                <joint name="club_grip" type="ball" damping="0.5"/>

                <!-- Club shaft -->
                <geom name="club_shaft" type="capsule"
                      fromto="0 0 0 0 0 -1.0"
                      size="0.01"
                      mass="0.3"
                      rgba="0.3 0.3 0.3 1"/>

                <!-- Club head (driver) -->
                <body name="club_head_body" pos="0 0.05 -1.0">
                  <geom name="club_head" type="box"
                        size="0.02 0.05 0.03"
                        mass="0.2"
                        rgba="0.2 0.2 0.2 1"/>
                  <site name="club_head_site" pos="0 0 0" size="0.01"/>
                </body>
              </body>
            </body>
          </body>
        </body>

        <!-- Right shoulder and arm (simplified mirror) -->
        <body name="right_shoulder" pos="0 -0.2 0.35">
          <joint name="right_shoulder_flex" type="hinge" axis="0 1 0" range="-60 180"/>
          <joint name="right_shoulder_abd" type="hinge" axis="1 0 0" range="-180 0"/>
          <joint name="right_shoulder_rot" type="hinge" axis="0 0 1" range="-90 90"/>
          <geom name="right_upper_arm" type="capsule" fromto="0 0 0 0 0 -0.3" size="0.04"/>
          <inertial pos="0 0 -0.15" mass="3" diaginertia="0.02 0.02 0.01"/>

          <body name="right_elbow" pos="0 0 -0.3">
            <joint name="right_elbow_flex" type="hinge" axis="0 1 0" range="0 145"/>
            <geom name="right_forearm" type="capsule" fromto="0 0 0 0 0 -0.3" size="0.03"/>
            <inertial pos="0 0 -0.15" mass="2" diaginertia="0.015 0.015 0.01"/>

            <body name="right_wrist" pos="0 0 -0.3">
              <joint name="right_wrist_flex" type="hinge" axis="0 1 0" range="-70 80"/>
              <joint name="right_wrist_dev" type="hinge" axis="1 0 0" range="-25 25"/>
              <geom name="right_hand" type="box" size="0.04 0.08 0.02" rgba="0.9 0.7 0.6 1"/>
              <inertial pos="0 0 0" mass="0.5" diaginertia="0.005 0.005 0.002"/>
            </body>
          </body>
        </body>
      </body>

      <!-- Left leg -->
      <body name="left_hip" pos="0 0.1 0">
        <joint name="left_hip_flex" type="hinge" axis="0 1 0" range="-30 120"/>
        <joint name="left_hip_abd" type="hinge" axis="1 0 0" range="-45 45"/>
        <joint name="left_hip_rot" type="hinge" axis="0 0 1" range="-45 45"/>
        <geom name="left_thigh" type="capsule" fromto="0 0 0 0 0 -0.45" size="0.06"/>
        <inertial pos="0 0 -0.225" mass="8" diaginertia="0.08 0.08 0.02"/>

        <body name="left_knee" pos="0 0 -0.45">
          <joint name="left_knee_flex" type="hinge" axis="0 1 0" range="0 135"/>
          <geom name="left_shin" type="capsule" fromto="0 0 0 0 0 -0.45" size="0.05"/>
          <inertial pos="0 0 -0.225" mass="5" diaginertia="0.05 0.05 0.015"/>

          <body name="left_ankle" pos="0 0 -0.45">
            <joint name="left_ankle_flex" type="hinge" axis="0 1 0" range="-30 45"/>
            <geom name="left_foot_geom" type="box" size="0.1 0.05 0.02" pos="0.05 0 0" rgba="0.9 0.7 0.6 1"/>
            <site name="left_foot" pos="0.05 0 -0.02" size="0.01"/>
            <inertial pos="0.05 0 0" mass="1.5" diaginertia="0.01 0.01 0.005"/>
          </body>
        </body>
      </body>

      <!-- Right leg (mirror) -->
      <body name="right_hip" pos="0 -0.1 0">
        <joint name="right_hip_flex" type="hinge" axis="0 1 0" range="-30 120"/>
        <joint name="right_hip_abd" type="hinge" axis="1 0 0" range="-45 45"/>
        <joint name="right_hip_rot" type="hinge" axis="0 0 1" range="-45 45"/>
        <geom name="right_thigh" type="capsule" fromto="0 0 0 0 0 -0.45" size="0.06"/>
        <inertial pos="0 0 -0.225" mass="8" diaginertia="0.08 0.08 0.02"/>

        <body name="right_knee" pos="0 0 -0.45">
          <joint name="right_knee_flex" type="hinge" axis="0 1 0" range="0 135"/>
          <geom name="right_shin" type="capsule" fromto="0 0 0 0 0 -0.45" size="0.05"/>
          <inertial pos="0 0 -0.225" mass="5" diaginertia="0.05 0.05 0.015"/>

          <body name="right_ankle" pos="0 0 -0.45">
            <joint name="right_ankle_flex" type="hinge" axis="0 1 0" range="-30 45"/>
            <geom name="right_foot_geom" type="box" size="0.1 0.05 0.02" pos="0.05 0 0" rgba="0.9 0.7 0.6 1"/>
            <site name="right_foot" pos="0.05 0 -0.02" size="0.01"/>
            <inertial pos="0.05 0 0" mass="1.5" diaginertia="0.01 0.01 0.005"/>
          </body>
        </body>
      </body>
    </body>

    <!-- Mocap bodies for trajectory tracking (Phase 2A) -->
    <!-- Uncomment when implementing pose tracking
    <body name="mocap_pelvis" mocap="true">
      <geom type="sphere" size="0.02" rgba="1 0 0 0.3" contype="0" conaffinity="0"/>
    </body>
    -->
  </worldbody>

  <!-- Actuators: torque-controlled motors -->
  <actuator>
    <!-- Spine -->
    <motor name="lumbar_rotation_motor" joint="lumbar_rotation" gear="150"/>
    <motor name="lumbar_flexion_motor" joint="lumbar_flexion" gear="120"/>

    <!-- Left arm -->
    <motor name="left_shoulder_flex_motor" joint="left_shoulder_flex" gear="100"/>
    <motor name="left_shoulder_abd_motor" joint="left_shoulder_abd" gear="100"/>
    <motor name="left_shoulder_rot_motor" joint="left_shoulder_rot" gear="80"/>
    <motor name="left_elbow_flex_motor" joint="left_elbow_flex" gear="80"/>
    <motor name="left_wrist_flex_motor" joint="left_wrist_flex" gear="50"/>
    <motor name="left_wrist_dev_motor" joint="left_wrist_dev" gear="40"/>

    <!-- Right arm -->
    <motor name="right_shoulder_flex_motor" joint="right_shoulder_flex" gear="100"/>
    <motor name="right_shoulder_abd_motor" joint="right_shoulder_abd" gear="100"/>
    <motor name="right_shoulder_rot_motor" joint="right_shoulder_rot" gear="80"/>
    <motor name="right_elbow_flex_motor" joint="right_elbow_flex" gear="80"/>
    <motor name="right_wrist_flex_motor" joint="right_wrist_flex" gear="50"/>
    <motor name="right_wrist_dev_motor" joint="right_wrist_dev" gear="40"/>

    <!-- Left leg -->
    <motor name="left_hip_flex_motor" joint="left_hip_flex" gear="150"/>
    <motor name="left_hip_abd_motor" joint="left_hip_abd" gear="120"/>
    <motor name="left_hip_rot_motor" joint="left_hip_rot" gear="150"/>
    <motor name="left_knee_flex_motor" joint="left_knee_flex" gear="100"/>
    <motor name="left_ankle_flex_motor" joint="left_ankle_flex" gear="60"/>

    <!-- Right leg -->
    <motor name="right_hip_flex_motor" joint="right_hip_flex" gear="150"/>
    <motor name="right_hip_abd_motor" joint="right_hip_abd" gear="120"/>
    <motor name="right_hip_rot_motor" joint="right_hip_rot" gear="150"/>
    <motor name="right_knee_flex_motor" joint="right_knee_flex" gear="100"/>
    <motor name="right_ankle_flex_motor" joint="right_ankle_flex" gear="60"/>

    <!-- Neck -->
    <motor name="neck_flex_motor" joint="neck_flex" gear="30"/>
  </actuator>

  <!-- Sensors for physics analysis -->
  <sensor>
    <!-- Joint position sensors -->
    <jointpos name="lumbar_rotation_pos" joint="lumbar_rotation"/>
    <jointpos name="left_hip_rot_pos" joint="left_hip_rot"/>

    <!-- Joint velocity sensors -->
    <jointvel name="lumbar_rotation_vel" joint="lumbar_rotation"/>

    <!-- Contact force sensors -->
    <touch name="left_foot_contact" site="left_foot"/>
    <touch name="right_foot_contact" site="right_foot"/>

    <!-- Club head speed -->
    <framelinvel name="club_head_vel" objtype="site" objname="club_head_site"/>
  </sensor>

</mujoco>
